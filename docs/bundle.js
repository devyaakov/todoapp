(()=>{"use strict";let e=[],t=1;function n(){let n=document.getElementById("items");n.innerHTML="";for(let i=0;i<e.length;i++){const a=e[i];let c=d(i,a.description,a.realized);c.draggable=!0,c.addEventListener("dragstart",o),c.addEventListener("dragover",l),c.addEventListener("drop",r),(2==t&&0==a.realized||3==t&&1==a.realized||1==t)&&n.appendChild(c)}i()}function d(t,d,o){let l=document.createElement("div");l.id="item"+t;let r=document.createElement("div"),a=document.createElement("div"),c=document.createElement("div");return l.className="row",o&&(l.className+=" realized"),r.className="todo-option",r.addEventListener("click",(()=>function(t){e[t].realized=!0,i(),n()}(t))),a.innerHTML=d,c.className="delete",c.addEventListener("click",(()=>function(t){e=e.filter(((e,n)=>n!=t)),document.getElementById("item"+t).remove(),n()}(t))),l.appendChild(r),l.appendChild(a),l.appendChild(c),l}function i(){let t=document.getElementById("footer-itemsLeft"),n=e.filter((e=>0==e.realized));t.innerHTML=n.length}function o(e){e.dataTransfer.setData("text/plain",e.target.id)}function l(e){e.preventDefault()}function r(t){const d=t.dataTransfer.getData("text/plain");let i=t.target.id;""==i&&(i=t.target.parentElement.id);let o=parseInt(d.replace("item","")),l=parseInt(i.replace("item","")),r=e.find(((e,t)=>t==o));e.splice(o,1),e.splice(l,0,r),n()}window.onload=function(){document.getElementById("newTodoInput").addEventListener("keydown",(t=>{var d;"Enter"==t.key&&(d=document.getElementById("newTodoInput").value,document.getElementById("newTodoInput").value="",e.push({description:d,realized:!1}),n())}));let d=document.getElementById("themeMode"),i=document.getElementById("footer-itemsLeft"),o=document.getElementById("footer-all"),l=document.getElementById("footer-active"),r=document.getElementById("footer-completed"),a=document.getElementById("footer-clear");d.addEventListener("click",(()=>(console.log("Change theme"),void document.body.classList.toggle("dark")))),i.addEventListener("click",(()=>OnClick_ItemsLeft())),o.addEventListener("click",(()=>(document.querySelectorAll(".items-footer div").forEach((e=>{e.classList.remove("actived")})),document.getElementById("footer-all").className+=" actived",t=1,void n()))),l.addEventListener("click",(()=>(document.querySelectorAll(".items-footer div").forEach((e=>{e.classList.remove("actived")})),document.getElementById("footer-active").className+=" actived",t=2,void n()))),r.addEventListener("click",(()=>(document.querySelectorAll(".items-footer div").forEach((e=>{e.classList.remove("actived")})),document.getElementById("footer-completed").className+=" actived",t=3,void n()))),a.addEventListener("click",(()=>(e=e.filter((e=>1!=e.realized)),void n()))),e=[{description:"Complete online JavaScript course",realized:!1},{description:"Job around the park 3x",realized:!1},{description:"10 minutes meditation",realized:!1},{description:"10 minutes meditation",realized:!1},{description:"Pick up groceries",realized:!1},{description:"Complete Todo App on Frontend Mentor",realized:!1}],n()}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWFwcC1tYWluLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbInRvZG9zIiwib3B0aW9uRm9vdGVyQWN0aXZlIiwiUmVmcmVzaCIsImRpdkl0ZW1zIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySFRNTCIsImkiLCJsZW5ndGgiLCJlbGVtZW50Iiwicm93IiwiQ3JlYXRlUm93IiwiZGVzY3JpcHRpb24iLCJyZWFsaXplZCIsImRyYWdnYWJsZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXREcmFnc3RhcnQiLCJzZXREcmFnZ2VkT3ZlciIsInNldERyb3AiLCJhcHBlbmRDaGlsZCIsIlJlZnJlc2hJdGVtTGVmdCIsImlkIiwidGV4dCIsImRpdlJvdyIsImNyZWF0ZUVsZW1lbnQiLCJkaXZUb2RvT3B0aW9uIiwiZGl2VGV4dCIsImRpdkRlbGV0ZSIsImNsYXNzTmFtZSIsIlJlYWxpemVkVG9kbyIsImZpbHRlciIsInZhbHVlIiwia2V5IiwicmVtb3ZlIiwiUmVtb3ZlVG9kbyIsImRpdkl0ZW1MZWZ0IiwiZWxlbXMiLCJlbGUiLCJlIiwiZGF0YVRyYW5zZmVyIiwic2V0RGF0YSIsInRhcmdldCIsInByZXZlbnREZWZhdWx0IiwiZ2V0RGF0YSIsImlkRGVzdGlubyIsInBhcmVudEVsZW1lbnQiLCJpZEludE9yaWdlbiIsInBhcnNlSW50IiwicmVwbGFjZSIsImlkSW50RGVzdGlubyIsIml0ZW0iLCJmaW5kIiwiaW5kZXgiLCJzcGxpY2UiLCJ3aW5kb3ciLCJvbmxvYWQiLCJuZXdUb2RvIiwicHVzaCIsInRoZW1lTW9kZSIsIml0ZW1zTGVmdCIsImZvb3RlckFsbCIsImZvb3RlckFjdGl2ZSIsImZvb3RlckNvbXBsZXRlZCIsImZvb3RlckNsZWFyIiwiY29uc29sZSIsImxvZyIsImJvZHkiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJPbkNsaWNrX0l0ZW1zTGVmdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWxlbSJdLCJtYXBwaW5ncyI6Im1CQUNBLElBQUlBLEVBQVEsR0FDUkMsRUFBcUIsRUFnRnpCLFNBQVNDLElBRUwsSUFBSUMsRUFBV0MsU0FBU0MsZUFBZSxTQUN2Q0YsRUFBU0csVUFBWSxHQUVyQixJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSVAsRUFBTVEsT0FBUUQsSUFBSyxDQUNuQyxNQUFNRSxFQUFVVCxFQUFNTyxHQUN0QixJQUFJRyxFQUFNQyxFQUFVSixFQUFHRSxFQUFRRyxZQUFhSCxFQUFRSSxVQUNwREgsRUFBSUksV0FBWSxFQUNoQkosRUFBSUssaUJBQWlCLFlBQWFDLEdBQ2xDTixFQUFJSyxpQkFBaUIsV0FBWUUsR0FDakNQLEVBQUlLLGlCQUFpQixPQUFRRyxJQUVKLEdBQXRCakIsR0FBK0MsR0FBcEJRLEVBQVFJLFVBRU4sR0FBdEJaLEdBQStDLEdBQXBCUSxFQUFRSSxVQUVkLEdBQXRCWixJQUhMRSxFQUFTZ0IsWUFBWVQsR0FRN0JVLElBR0osU0FBU1QsRUFBVVUsRUFBSUMsRUFBTVQsR0FDekIsSUFBSVUsRUFBU25CLFNBQVNvQixjQUFjLE9BQ3BDRCxFQUFPRixHQUFLLE9BQU9BLEVBRW5CLElBQUlJLEVBQWdCckIsU0FBU29CLGNBQWMsT0FDdkNFLEVBQVV0QixTQUFTb0IsY0FBYyxPQUNqQ0csRUFBWXZCLFNBQVNvQixjQUFjLE9BaUJ2QyxPQWZBRCxFQUFPSyxVQUFZLE1BRWhCZixJQUNDVSxFQUFPSyxXQUFhLGFBRXhCSCxFQUFjRyxVQUFXLGNBQ3pCSCxFQUFjVixpQkFBaUIsU0FBUyxJQVk1QyxTQUFzQk0sR0FDbEJyQixFQUFNcUIsR0FBSVIsVUFBVyxFQUVyQk8sSUFDQWxCLElBaEI2QzJCLENBQWFSLEtBQzFESyxFQUFRcEIsVUFBVWdCLEVBQ2xCSyxFQUFVQyxVQUFZLFNBQ3RCRCxFQUFVWixpQkFBaUIsU0FBUyxJQWdCeEMsU0FBb0JNLEdBRWhCckIsRUFBUUEsRUFBTThCLFFBQU8sQ0FBQ0MsRUFBT0MsSUFBUUEsR0FBT1gsSUFFNUNqQixTQUFTQyxlQUFlLE9BQU9nQixHQUFJWSxTQUVuQy9CLElBdEJ5Q2dDLENBQVdiLEtBRXBERSxFQUFPSixZQUFZTSxHQUNuQkYsRUFBT0osWUFBWU8sR0FDbkJILEVBQU9KLFlBQVlRLEdBRVpKLEVBNkNYLFNBQVNILElBQ0wsSUFBSWUsRUFBYy9CLFNBQVNDLGVBQWUsb0JBQ3RDK0IsRUFBUXBDLEVBQU04QixRQUFPTyxHQUF1QixHQUFoQkEsRUFBSXhCLFdBQ3BDc0IsRUFBWTdCLFVBQVk4QixFQUFNNUIsT0FJbEMsU0FBU1EsRUFBYXNCLEdBQ2xCQSxFQUFFQyxhQUFhQyxRQUFRLGFBQWNGLEVBQUVHLE9BQU9wQixJQUdsRCxTQUFTSixFQUFlcUIsR0FDcEJBLEVBQUVJLGlCQUdOLFNBQVN4QixFQUFRb0IsR0FDYixNQUFNakIsRUFBS2lCLEVBQUVDLGFBQWFJLFFBQVEsY0FDbEMsSUFBSUMsRUFBWU4sRUFBRUcsT0FBT3BCLEdBRVIsSUFBYnVCLElBQ0FBLEVBQVlOLEVBQUVHLE9BQU9JLGNBQWN4QixJQUV2QyxJQUFJeUIsRUFBY0MsU0FBUzFCLEVBQUcyQixRQUFRLE9BQU8sS0FDekNDLEVBQWVGLFNBQVNILEVBQVVJLFFBQVEsT0FBTyxLQUNqREUsRUFBT2xELEVBQU1tRCxNQUFLLENBQUNwQixFQUFPcUIsSUFBVUEsR0FBU04sSUFHakQ5QyxFQUFNcUQsT0FBT1AsRUFBYSxHQUMxQjlDLEVBQU1xRCxPQUFPSixFQUFjLEVBQUdDLEdBQzlCaEQsSUFHSm9ELE9BQU9DLE9BL0xQLFdBRXVCbkQsU0FBU0MsZUFBZSxnQkFDOUJVLGlCQUFpQixXQUFZdUIsSUFrSTlDLElBQWlCa0IsRUFqSUcsU0FBVGxCLEVBQUVOLE1BaUlJd0IsRUEvSEdwRCxTQUFTQyxlQUFlLGdCQUFnQjBCLE1BZ0l4RDNCLFNBQVNDLGVBQWUsZ0JBQWdCMEIsTUFBUSxHQUNoRC9CLEVBQU15RCxLQUFLLENBQUUsWUFBZUQsRUFBUzNDLFVBQVUsSUFDL0NYLFFBOUhBLElBQUl3RCxFQUFZdEQsU0FBU0MsZUFBZSxhQUVwQ3NELEVBQVl2RCxTQUFTQyxlQUFlLG9CQUNwQ3VELEVBQVl4RCxTQUFTQyxlQUFlLGNBQ3BDd0QsRUFBZXpELFNBQVNDLGVBQWUsaUJBQ3ZDeUQsRUFBa0IxRCxTQUFTQyxlQUFlLG9CQUMxQzBELEVBQWMzRCxTQUFTQyxlQUFlLGdCQUUxQ3FELEVBQVUzQyxpQkFBaUIsU0FBUyxLQVlwQ2lELFFBQVFDLElBQUkscUJBQ1o3RCxTQUFTOEQsS0FBS0MsVUFBVUMsT0FBTyxXQVgvQlQsRUFBVTVDLGlCQUFpQixTQUFTLElBQU1zRCxzQkFDMUNULEVBQVU3QyxpQkFBaUIsU0FBUyxLQWN4QlgsU0FBU2tFLGlCQUFpQixxQkFDaENDLFNBQVFDLElBQ1ZBLEVBQUtMLFVBQVVsQyxPQUFPLGNBRTFCN0IsU0FBU0MsZUFBZSxjQUFjdUIsV0FBYSxXQXFHbkQzQixFQUFxQixPQUNyQkMsT0F2SEEyRCxFQUFhOUMsaUJBQWlCLFNBQVMsS0FzQjNCWCxTQUFTa0UsaUJBQWlCLHFCQUNoQ0MsU0FBUUMsSUFDVkEsRUFBS0wsVUFBVWxDLE9BQU8sY0FFMUI3QixTQUFTQyxlQUFlLGlCQUFpQnVCLFdBQWEsV0FpR3REM0IsRUFBcUIsT0FDckJDLE9BM0hBNEQsRUFBZ0IvQyxpQkFBaUIsU0FBUyxLQStCOUJYLFNBQVNrRSxpQkFBaUIscUJBQ2hDQyxTQUFRQyxJQUNWQSxFQUFLTCxVQUFVbEMsT0FBTyxjQUUxQjdCLFNBQVNDLGVBQWUsb0JBQW9CdUIsV0FBYSxXQTRGekQzQixFQUFxQixPQUNyQkMsT0EvSEE2RCxFQUFZaEQsaUJBQWlCLFNBQVMsS0FtSXRDZixFQUFRQSxFQUFNOEIsUUFBT08sR0FBdUIsR0FBaEJBLEVBQUl4QixnQkFDaENYLE9BdktBRixFQUFRLENBQ0osQ0FBQyxZQUFlLG9DQUFxQ2EsVUFBVSxHQUMvRCxDQUFDLFlBQWUseUJBQTBCQSxVQUFVLEdBQ3BELENBQUMsWUFBZSx3QkFBeUJBLFVBQVUsR0FDbkQsQ0FBQyxZQUFlLHdCQUF5QkEsVUFBVSxHQUNuRCxDQUFDLFlBQWUsb0JBQXFCQSxVQUFVLEdBQy9DLENBQUMsWUFBZSx1Q0FBd0NBLFVBQVUsSUFFdEVYLE0iLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICcuL3N0eWxlLnNjc3MnO1xyXG5sZXQgdG9kb3MgPSBbXTtcclxubGV0IG9wdGlvbkZvb3RlckFjdGl2ZSA9IDE7XHJcblxyXG5mdW5jdGlvbiBMb2FkRGF0YSgpe1xyXG4gICAgdG9kb3MgPSBbXHJcbiAgICAgICAge1wiZGVzY3JpcHRpb25cIjogXCJDb21wbGV0ZSBvbmxpbmUgSmF2YVNjcmlwdCBjb3Vyc2VcIiwgcmVhbGl6ZWQ6IGZhbHNlIH0sXHJcbiAgICAgICAge1wiZGVzY3JpcHRpb25cIjogXCJKb2IgYXJvdW5kIHRoZSBwYXJrIDN4XCIsIHJlYWxpemVkOiBmYWxzZSB9LFxyXG4gICAgICAgIHtcImRlc2NyaXB0aW9uXCI6IFwiMTAgbWludXRlcyBtZWRpdGF0aW9uXCIsIHJlYWxpemVkOiBmYWxzZSB9LFxyXG4gICAgICAgIHtcImRlc2NyaXB0aW9uXCI6IFwiMTAgbWludXRlcyBtZWRpdGF0aW9uXCIsIHJlYWxpemVkOiBmYWxzZSB9LFxyXG4gICAgICAgIHtcImRlc2NyaXB0aW9uXCI6IFwiUGljayB1cCBncm9jZXJpZXNcIiwgcmVhbGl6ZWQ6IGZhbHNlIH0sXHJcbiAgICAgICAge1wiZGVzY3JpcHRpb25cIjogXCJDb21wbGV0ZSBUb2RvIEFwcCBvbiBGcm9udGVuZCBNZW50b3JcIiwgcmVhbGl6ZWQ6IGZhbHNlIH0sXHJcbiAgICBdO1xyXG4gICAgUmVmcmVzaCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0aWFsaXplKCl7XHJcblxyXG4gICAgbGV0IG5ld1RvZG9JbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3VG9kb0lucHV0XCIpO1xyXG4gICAgbmV3VG9kb0lucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSk9PntcclxuICAgICAgICBpZihlLmtleSA9PSBcIkVudGVyXCIpe1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgQWRkVG9kbyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ld1RvZG9JbnB1dFwiKS52YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IHRoZW1lTW9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGhlbWVNb2RlXCIpO1xyXG5cclxuICAgIGxldCBpdGVtc0xlZnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvb3Rlci1pdGVtc0xlZnRcIik7XHJcbiAgICBsZXQgZm9vdGVyQWxsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmb290ZXItYWxsXCIpO1xyXG4gICAgbGV0IGZvb3RlckFjdGl2ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9vdGVyLWFjdGl2ZVwiKTtcclxuICAgIGxldCBmb290ZXJDb21wbGV0ZWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvb3Rlci1jb21wbGV0ZWRcIik7XHJcbiAgICBsZXQgZm9vdGVyQ2xlYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvb3Rlci1jbGVhclwiKTtcclxuXHJcbiAgICB0aGVtZU1vZGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IE9uQ2xpY2tfQ2hhbmdlVGhlbWUoKSk7XHJcblxyXG4gICAgaXRlbXNMZWZ0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gT25DbGlja19JdGVtc0xlZnQoKSk7XHJcbiAgICBmb290ZXJBbGwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBPbkNsaWNrX0Zvb3RlckFsbCgpKTtcclxuICAgIGZvb3RlckFjdGl2ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IE9uQ2xpY2tfRm9vdGVyQWN0aXZlKCkpO1xyXG4gICAgZm9vdGVyQ29tcGxldGVkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gT25DbGlja19Gb290ZXJDb21wbGV0ZWQoKSk7XHJcbiAgICBmb290ZXJDbGVhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IE9uQ2xpY2tfRm9vdGVyQ2xlYXIoKSk7XHJcblxyXG4gICAgTG9hZERhdGEoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gT25DbGlja19DaGFuZ2VUaGVtZSgpe1xyXG4gICAgY29uc29sZS5sb2coXCJDaGFuZ2UgdGhlbWVcIik7XHJcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoXCJkYXJrXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBPbkNsaWNrX0Zvb3RlckFsbCgpe1xyXG4gICAgbGV0IGVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5pdGVtcy1mb290ZXIgZGl2XCIpO1xyXG4gICAgZWxlbXMuZm9yRWFjaChlbGVtID0+e1xyXG4gICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlZCcpO1xyXG4gICAgfSk7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvb3Rlci1hbGxcIikuY2xhc3NOYW1lICs9IFwiIGFjdGl2ZWRcIjtcclxuICAgIFNob3dBbGwoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gT25DbGlja19Gb290ZXJBY3RpdmUoKXtcclxuICAgIGxldCBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaXRlbXMtZm9vdGVyIGRpdlwiKTtcclxuICAgIGVsZW1zLmZvckVhY2goZWxlbSA9PntcclxuICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZWQnKTtcclxuICAgIH0pO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmb290ZXItYWN0aXZlXCIpLmNsYXNzTmFtZSArPSBcIiBhY3RpdmVkXCI7XHJcblxyXG4gICAgU2hvd0J5QWN0aXZlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIE9uQ2xpY2tfRm9vdGVyQ29tcGxldGVkKCl7XHJcbiAgICBsZXQgZWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLml0ZW1zLWZvb3RlciBkaXZcIik7XHJcbiAgICBlbGVtcy5mb3JFYWNoKGVsZW0gPT57XHJcbiAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmVkJyk7XHJcbiAgICB9KTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9vdGVyLWNvbXBsZXRlZFwiKS5jbGFzc05hbWUgKz0gXCIgYWN0aXZlZFwiO1xyXG4gICAgU2hvd0NvbXBsZXRlZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBPbkNsaWNrX0Zvb3RlckNsZWFyKCl7XHJcbiAgICBDbGVhckNvbXBsZXRlZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBSZWZyZXNoKCl7ICAgIFxyXG5cclxuICAgIGxldCBkaXZJdGVtcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaXRlbXNcIik7XHJcbiAgICBkaXZJdGVtcy5pbm5lckhUTUwgPSBcIlwiO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9kb3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0gdG9kb3NbaV07XHJcbiAgICAgICAgbGV0IHJvdyA9IENyZWF0ZVJvdyhpLCBlbGVtZW50LmRlc2NyaXB0aW9uLCBlbGVtZW50LnJlYWxpemVkKTtcclxuICAgICAgICByb3cuZHJhZ2dhYmxlID0gdHJ1ZTtcclxuICAgICAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0Jywgc2V0RHJhZ3N0YXJ0KTtcclxuICAgICAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBzZXREcmFnZ2VkT3Zlcik7XHJcbiAgICAgICAgcm93LmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBzZXREcm9wKTtcclxuXHJcbiAgICAgICAgaWYob3B0aW9uRm9vdGVyQWN0aXZlID09IDIgJiYgZWxlbWVudC5yZWFsaXplZCA9PSBmYWxzZSl7XHJcbiAgICAgICAgICAgIGRpdkl0ZW1zLmFwcGVuZENoaWxkKHJvdylcclxuICAgICAgICB9ZWxzZSBpZiAob3B0aW9uRm9vdGVyQWN0aXZlID09IDMgJiYgZWxlbWVudC5yZWFsaXplZCA9PSB0cnVlKXtcclxuICAgICAgICAgICAgZGl2SXRlbXMuYXBwZW5kQ2hpbGQocm93KVxyXG4gICAgICAgIH1lbHNlIGlmKG9wdGlvbkZvb3RlckFjdGl2ZSA9PSAxKXtcclxuICAgICAgICAgICAgZGl2SXRlbXMuYXBwZW5kQ2hpbGQocm93KVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIH1cclxuICAgIFJlZnJlc2hJdGVtTGVmdCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBDcmVhdGVSb3coaWQsIHRleHQsIHJlYWxpemVkKXtcclxuICAgIGxldCBkaXZSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGRpdlJvdy5pZCA9IFwiaXRlbVwiK2lkO1xyXG5cclxuICAgIGxldCBkaXZUb2RvT3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBsZXQgZGl2VGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgbGV0IGRpdkRlbGV0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cclxuICAgIGRpdlJvdy5jbGFzc05hbWUgPSBcInJvd1wiO1xyXG5cclxuICAgIGlmKHJlYWxpemVkKVxyXG4gICAgICAgIGRpdlJvdy5jbGFzc05hbWUgKz0gXCIgcmVhbGl6ZWRcIjtcclxuICAgIFxyXG4gICAgZGl2VG9kb09wdGlvbi5jbGFzc05hbWUgPVwidG9kby1vcHRpb25cIjtcclxuICAgIGRpdlRvZG9PcHRpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+IFJlYWxpemVkVG9kbyhpZCkpO1xyXG4gICAgZGl2VGV4dC5pbm5lckhUTUw9dGV4dDtcclxuICAgIGRpdkRlbGV0ZS5jbGFzc05hbWUgPSBcImRlbGV0ZVwiO1xyXG4gICAgZGl2RGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PiBSZW1vdmVUb2RvKGlkKSk7XHJcblxyXG4gICAgZGl2Um93LmFwcGVuZENoaWxkKGRpdlRvZG9PcHRpb24pO1xyXG4gICAgZGl2Um93LmFwcGVuZENoaWxkKGRpdlRleHQpO1xyXG4gICAgZGl2Um93LmFwcGVuZENoaWxkKGRpdkRlbGV0ZSk7XHJcblxyXG4gICAgcmV0dXJuIGRpdlJvdztcclxufVxyXG5cclxuZnVuY3Rpb24gUmVhbGl6ZWRUb2RvKGlkKXtcclxuICAgIHRvZG9zW2lkXS5yZWFsaXplZCA9IHRydWU7XHJcbiAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIml0ZW1cIitpZCkuY2xhc3NOYW1lICs9IFwiIHJlYWxpemVkXCI7XHJcbiAgICBSZWZyZXNoSXRlbUxlZnQoKTtcclxuICAgIFJlZnJlc2goKTtcclxufVxyXG5cclxuZnVuY3Rpb24gUmVtb3ZlVG9kbyhpZCl7XHJcbiAgICBcclxuICAgIHRvZG9zID0gdG9kb3MuZmlsdGVyKCh2YWx1ZSwga2V5KSA9PiBrZXkgIT0gaWQgKTtcclxuXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIml0ZW1cIitpZCkucmVtb3ZlKCk7XHJcbiAgIFxyXG4gICAgUmVmcmVzaCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBBZGRUb2RvKG5ld1RvZG8pe1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZXdUb2RvSW5wdXRcIikudmFsdWUgPSAnJztcclxuICAgIHRvZG9zLnB1c2goeyBcImRlc2NyaXB0aW9uXCI6IG5ld1RvZG8sIHJlYWxpemVkOiBmYWxzZSB9KTtcclxuICAgIFJlZnJlc2goKTtcclxufVxyXG5cclxuZnVuY3Rpb24gU2hvd0FsbCgpe1xyXG4gICAgb3B0aW9uRm9vdGVyQWN0aXZlID0gMTsgLy8gQWxsXHJcbiAgICBSZWZyZXNoKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFNob3dCeUFjdGl2ZSgpe1xyXG4gICAgb3B0aW9uRm9vdGVyQWN0aXZlID0gMjsgLy8gQWN0aXZlXHJcbiAgICBSZWZyZXNoKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFNob3dDb21wbGV0ZWQoKXtcclxuICAgIG9wdGlvbkZvb3RlckFjdGl2ZSA9IDM7IC8vIENvbXBsZXRlZFxyXG4gICAgUmVmcmVzaCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBDbGVhckNvbXBsZXRlZCgpe1xyXG4gICAgdG9kb3MgPSB0b2Rvcy5maWx0ZXIoZWxlID0+IGVsZS5yZWFsaXplZCAhPSB0cnVlKTtcclxuICAgIFJlZnJlc2goKTtcclxufVxyXG5cclxuZnVuY3Rpb24gUmVmcmVzaEl0ZW1MZWZ0KCl7XHJcbiAgICBsZXQgZGl2SXRlbUxlZnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvb3Rlci1pdGVtc0xlZnRcIik7XHJcbiAgICBsZXQgZWxlbXMgPSB0b2Rvcy5maWx0ZXIoZWxlID0+IGVsZS5yZWFsaXplZCA9PSBmYWxzZSk7XHJcbiAgICBkaXZJdGVtTGVmdC5pbm5lckhUTUwgPSBlbGVtcy5sZW5ndGg7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBzZXREcmFnc3RhcnQoZSl7XHJcbiAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgZS50YXJnZXQuaWQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXREcmFnZ2VkT3ZlcihlKXtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0RHJvcChlKXtcclxuICAgIGNvbnN0IGlkID0gZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YShcInRleHQvcGxhaW5cIik7XHJcbiAgICBsZXQgaWREZXN0aW5vID0gZS50YXJnZXQuaWQ7XHJcblxyXG4gICAgaWYgKGlkRGVzdGlubyA9PSBcIlwiKVxyXG4gICAgICAgIGlkRGVzdGlubyA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQuaWQ7XHJcblxyXG4gICAgbGV0IGlkSW50T3JpZ2VuID0gcGFyc2VJbnQoaWQucmVwbGFjZShcIml0ZW1cIixcIlwiKSk7XHJcbiAgICBsZXQgaWRJbnREZXN0aW5vID0gcGFyc2VJbnQoaWREZXN0aW5vLnJlcGxhY2UoXCJpdGVtXCIsXCJcIikpO1xyXG4gICAgbGV0IGl0ZW0gPSB0b2Rvcy5maW5kKCh2YWx1ZSwgaW5kZXgpID0+IGluZGV4ID09IGlkSW50T3JpZ2VuKTtcclxuICAgIFxyXG5cclxuICAgIHRvZG9zLnNwbGljZShpZEludE9yaWdlbiwgMSk7XHJcbiAgICB0b2Rvcy5zcGxpY2UoaWRJbnREZXN0aW5vLCAwLCBpdGVtKTtcclxuICAgIFJlZnJlc2goKTtcclxufVxyXG5cclxud2luZG93Lm9ubG9hZCA9IGluaXRpYWxpemU7XHJcblxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==